<!-- ============================= -->
<!-- ALERTA DE CUPOS AGOTADOS -->
<!-- ============================= -->
<!--
<div *ngIf="paquete.cantidad_personas > paquete.fijas.taller.cupos_libres" class="alerta-cupos">
  âš ï¸ Cupos agotados: Este paquete requiere
  {{ paquete.cantidad_personas }} personas, pero solo quedan
  {{ paquete.fijas.taller.cupos_libres }} cupos disponibles.
  <br>
  Por favor, selecciona otro volviendo atrÃ¡s.
</div>
-->

<div class="hero">
  <button (click)="volver()" class="btn-volver">Volver</button>
  <img *ngIf="paquete?.fijas" 
     [src]="getImagenUrl(paquete.fijas.taller.link_imagen)">
  <div class="hero-overlay">
    <h1>{{ paquete.fijas.titulo }}</h1>
    <p class="blanco">{{ paquete.fijas.taller.direccion }}</p>
  </div>
</div>

<!-- Ribbon Informativa -->
<div class="ribbon">
  <div class="item">ğŸ‘¥ {{ paquete.cantidad_personas }} pers.</div>
  <div class="item">ğŸ’° S/ {{ paquete.precio }}</div>
  <div class="item">ğŸ“¦ Taller: {{ paquete.fijas.taller.titulo }}</div>
  <div class="item">ğŸ‘¥ Cupos libres del taller: {{ paquete.fijas.taller.cupos_libres }}</div>
  <div class="item">â± Horario: {{ paquete.dia }} a las {{ paquete.hora }}</div>


</div>

<div class="layout">

  <!-- COLUMNA IZQUIERDA -->
  <div class="left">

    <section class="section section-experiencia">
      <h2>Sobre este taller</h2>
      <p>{{ paquete.fijas.taller.descripcion }}</p>
    </section>

    <!-- Itinerario -->
    <section class="section section-itinerario">
      <h3>Todos los horarios:</h3>
      <details *ngFor="let f of fechas">
        <summary>DÃ­a: {{ f.dia }} Hora: {{ f.hora }} â€” {{ f.titulo }}</summary>
        <p>Descripcion: {{ f.descripcion }}</p>
        <p>MÃ¡ximas personas del horario: {{ f.maximas_personas }}</p>
        <p>Cantidad de personas registradas: {{ f.personas_registradas }}</p>
      </details>
    </section>


    <!-- Comunidad / Creador -->
    <section class="section section-comunidad">
      <h3>Creador</h3>
      <div class="comunidad">
        <img src="assets/images/avatar.png" alt="Usuario">
        <div>
          <h4>{{ perfilPublico?.nombre  }}</h4>
          <p>Conoce a la comunidad!!</p>
        </div>
      </div>
      <button class="btn-secundario" [routerLink]="['/perfilpublico/',paquete.fijas.taller.usua.id_usuario]">Ver perfil</button>
    </section>

  </div>
  <!-- UbicaciÃ³n -->
  <section class="section section-ubicacion">
    <h3>UbicaciÃ³n</h3>

    <iframe width="100%" height="280" loading="lazy" style="border-radius: 12px;" [src]="mapaUrl">
    </iframe>
  </section>
  <!-- COLUMNA DERECHA -->
  <div class="right">
    <div class="card-reserva">

      <div class="precio-box">
        <h2>S/ {{ paquete.precio }}</h2>
        <span>por {{ paquete.cantidad_personas }} personas</span>
      </div>

      <hr>

      <!-- BotÃ³n o mensaje segÃºn disponibilidad -->
      <ng-container *ngIf="paquete.cantidad_personas <= paquete.fijas.taller.cupos_libres; else cuposAgotados">
        <button class="btn-reservar" (click)="reservarPaquete()">
          Reservar paquete ğŸš€
        </button>
      </ng-container>

      <ng-template #cuposAgotados>
        <div class="mensaje-cupos">
          âš ï¸ Cupos agotados: Este paquete requiere {{ paquete.cantidad_personas }} personas,
          pero solo quedan {{ paquete.fijas.taller.cupos_libres }} cupos disponibles.
        </div>
      </ng-template>

      <div class="confianza">
        <p>ğŸ”’ Pago seguro</p>
        <p>ğŸ’¬ CancelaciÃ³n flexible</p>
        <p>ğŸ¤ Apoyas directamente a artesanos locales</p>
      </div>

    </div>
  </div>


</div>